var e=Object.defineProperty,t=(t,s,a)=>(((t,s,a)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a})(t,"symbol"!=typeof s?s+"":s,a),a);import{j as s,b as a,u as r,c as l}from"./query-9fe77bbe.js";import{r as i}from"./vendor-5e66fe52.js";import{L as n}from"./router-d215a13b.js";import{B as c,w as d,z as o,I as m,L as u,K as x,i as h,p as g,A as j,M as b,n as p,u as f,o as y,C as v,c as N,D as k,a as w,b as _,t as P,E as C,h as S,j as q,G as D,H as F,f as L,J as A,N as z,O as K,P as Q,Q as T,R as B}from"./index-654029b0.js";import{o as E,s as I,e as O,n as $,u as H}from"./forms-1427850a.js";import{t as M}from"./zod-7016e973.js";import{T as R}from"./Textarea-cb271d34.js";import{a as U}from"./useClients-84110019.js";import{C as G}from"./ConfirmDialog-287d4948.js";import{B as V}from"./BaseService-e2aecc13.js";import"./supabase-e62705ad.js";import"./icons-9f4f2400.js";const J=E({name:I().min(1,"Project name is required").max(100,"Name must be less than 100 characters"),description:I().min(1,"Description is required").max(1e3,"Description must be less than 1000 characters"),client_id:I().min(1,"Client is required"),status:O(["planning","in_progress","on_hold","completed","cancelled"]),priority:O(["low","medium","high","urgent"]),budget:$().min(0,"Budget must be positive").optional(),start_date:I().optional(),due_date:I().optional(),notes:I().max(500,"Notes must be less than 500 characters").optional()});function Y({project:e,onSave:t,onCancel:a,isLoading:r=!1}){const[l,n]=i.useState(!1),{data:b,isLoading:p}=U(),{register:f,handleSubmit:y,formState:{errors:v},reset:N}=H({resolver:M(J),defaultValues:{name:"",description:"",client_id:"",status:"planning",priority:"medium",budget:void 0,start_date:"",due_date:"",notes:""}});i.useEffect(()=>{e&&N({name:e.name,description:e.description,client_id:e.client_id,status:e.status,priority:"medium",budget:e.budget||void 0,start_date:"",due_date:e.due_date?e.due_date.split("T")[0]:"",notes:""})},[e,N]);return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:e?"Edit Project":"Create New Project"}),s.jsx(c,{variant:"ghost",size:"sm",onClick:a,className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:s.jsx(d,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:y(async e=>{n(!0);try{const s={name:e.name,description:e.description,client_id:e.client_id,status:e.status,budget:e.budget||0,timeline:"TBD",milestones:{},due_date:e.due_date||null};await t(s)}catch(s){}finally{n(!1)}}),className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 flex items-center",children:[s.jsx(o,{className:"w-5 h-5 mr-2"}),"Basic Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Project Name *"}),s.jsx(m,{...f("name"),placeholder:"Enter project name",className:v.name?"border-red-500":""}),v.name&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.name.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Client *"}),p?s.jsx("div",{className:"flex items-center justify-center h-10",children:s.jsx(u,{size:"sm"})}):s.jsxs("select",{...f("client_id"),className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-primary-500 "+(v.client_id?"border-red-500":"border-slate-300 dark:border-slate-600"),children:[s.jsx("option",{value:"",children:"Select a client"}),null==b?void 0:b.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]}),v.client_id&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.client_id.message})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description *"}),s.jsx(R,{...f("description"),placeholder:"Describe the project...",rows:4,className:v.description?"border-red-500":""}),v.description&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.description.message})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 flex items-center",children:[s.jsx(x,{className:"w-5 h-5 mr-2"}),"Project Details"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status"}),s.jsx("select",{...f("status"),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[{value:"planning",label:"Planning",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300"},{value:"in_progress",label:"In Progress",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300"},{value:"on_hold",label:"On Hold",color:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300"},{value:"completed",label:"Completed",color:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300"},{value:"cancelled",label:"Cancelled",color:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300"}].map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Priority"}),s.jsx("select",{...f("priority"),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[{value:"low",label:"Low",color:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300"},{value:"medium",label:"Medium",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300"},{value:"high",label:"High",color:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300"},{value:"urgent",label:"Urgent",color:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300"}].map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[s.jsx(h,{className:"w-4 h-4 inline mr-1"}),"Budget"]}),s.jsx(m,{type:"number",step:"0.01",min:"0",...f("budget",{valueAsNumber:!0}),placeholder:"0.00",className:v.budget?"border-red-500":""}),v.budget&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.budget.message})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[s.jsx(g,{className:"w-4 h-4 inline mr-1"}),"Start Date"]}),s.jsx(m,{type:"date",...f("start_date"),className:v.start_date?"border-red-500":""}),v.start_date&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.start_date.message})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[s.jsx(g,{className:"w-4 h-4 inline mr-1"}),"Due Date"]}),s.jsx(m,{type:"date",...f("due_date"),className:v.due_date?"border-red-500":""}),v.due_date&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.due_date.message})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 flex items-center",children:[s.jsx(o,{className:"w-5 h-5 mr-2"}),"Additional Information"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notes"}),s.jsx(R,{...f("notes"),placeholder:"Additional notes or comments...",rows:3,className:v.notes?"border-red-500":""}),v.notes&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.notes.message})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-slate-200 dark:border-slate-700",children:[s.jsx(c,{type:"button",variant:"outline",onClick:a,disabled:l||r,children:"Cancel"}),s.jsxs(c,{type:"submit",disabled:l||r,className:"bg-gradient-to-r from-primary to-primary-600 hover:from-primary-600 hover:to-primary-700",children:[l||r?s.jsx(u,{size:"sm",className:"mr-2"}):s.jsx(j,{className:"w-4 h-4 mr-2"}),e?"Update Project":"Create Project"]})]})]})]})}const W=new class extends V{constructor(){super(...arguments),t(this,"tableName","projects")}async getProjects(e,t){try{let s=b.from(this.tableName).select("\n          *,\n          client:clients(id, name, email)\n        ").order("created_at",{ascending:!1});if(e&&(e.status&&(s=s.eq("status",e.status)),e.priority&&(s=s.eq("priority",e.priority)),e.client_id&&(s=s.eq("client_id",e.client_id)),e.name_search&&(s=s.ilike("name",`%${e.name_search}%`)),e.description_search&&(s=s.ilike("description",`%${e.description_search}%`))),t){const{page:e=1,limit:a=10}=t,r=(e-1)*a,l=r+a-1;s=s.range(r,l)}const{data:a,error:r}=await s;return r?{data:null,error:r.message,success:!1}:{data:a||[],error:null,success:!0}}catch(s){return{data:null,error:"Failed to fetch projects",success:!1}}}async getProject(e){try{const{data:t,error:s}=await b.from(this.tableName).select("\n          *,\n          client:clients(id, name, email)\n        ").eq("id",e).single();return s?{data:null,error:s.message,success:!1}:{data:t,error:null,success:!0}}catch(t){return{data:null,error:"Failed to fetch project",success:!1}}}async createProject(e){try{const{data:t,error:s}=await b.from(this.tableName).insert(e).select().single();return s?{data:null,error:s.message,success:!1}:{data:t,error:null,success:!0}}catch(t){return{data:null,error:"Failed to create project",success:!1}}}async updateProject(e,t){try{const{data:s,error:a}=await b.from(this.tableName).update({...t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();return a?{data:null,error:a.message,success:!1}:{data:s,error:null,success:!0}}catch(s){return{data:null,error:"Failed to update project",success:!1}}}async deleteProject(e){try{const{error:t}=await b.from(this.tableName).delete().eq("id",e);return t?{data:null,error:t.message,success:!1}:{data:!0,error:null,success:!0}}catch(t){return{data:null,error:"Failed to delete project",success:!1}}}async getProjectStats(){try{const{data:e,error:t}=await b.from(this.tableName).select("status, priority, created_at, due_date, budget");if(t)return{data:null,error:t.message,success:!1};const s=new Date;return{data:{total:e.length,planning:e.filter(e=>"planning"===e.status).length,in_progress:e.filter(e=>"in_progress"===e.status).length,on_hold:e.filter(e=>"on_hold"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,cancelled:e.filter(e=>"cancelled"===e.status).length,highPriority:e.filter(e=>"high"===e.priority||"urgent"===e.priority).length,overdue:e.filter(e=>!!e.due_date&&(new Date(e.due_date)<s&&"completed"!==e.status)).length,recentlyCreated:e.filter(e=>{const t=new Date(e.created_at),s=new Date;return s.setDate(s.getDate()-7),t>s}).length,totalRevenue:e.filter(e=>"completed"===e.status&&e.budget).reduce((e,t)=>e+(t.budget||0),0)},error:null,success:!0}}catch(e){return{data:null,error:"Failed to fetch project stats",success:!1}}}async searchProjects(e){try{const{data:t,error:s}=await b.from(this.tableName).select("\n          *,\n          client:clients(id, name, email)\n        ").or(`name.ilike.%${e}%,description.ilike.%${e}%`).order("created_at",{ascending:!1}).limit(20);return s?{data:null,error:s.message,success:!1}:{data:t||[],error:null,success:!0}}catch(t){return{data:null,error:"Failed to search projects",success:!1}}}async getRecentProjects(e=5){try{const{data:t,error:s}=await b.from(this.tableName).select("\n          *,\n          client:clients(id, name, email)\n        ").order("created_at",{ascending:!1}).limit(e);return s?{data:null,error:s.message,success:!1}:{data:t||[],error:null,success:!0}}catch(t){return{data:null,error:"Failed to fetch recent projects",success:!1}}}async getProjectsByStatus(e){try{const{data:t,error:s}=await b.from(this.tableName).select("\n          *,\n          client:clients(id, name, email)\n        ").eq("status",e).order("created_at",{ascending:!1});return s?{data:null,error:s.message,success:!1}:{data:t||[],error:null,success:!0}}catch(t){return{data:null,error:"Failed to fetch projects by status",success:!1}}}async getProjectsByClient(e){try{const{data:t,error:s}=await b.from(this.tableName).select("*").eq("client_id",e).order("created_at",{ascending:!1});return s?{data:null,error:s.message,success:!1}:{data:t||[],error:null,success:!0}}catch(t){return{data:null,error:"Failed to fetch projects by client",success:!1}}}subscribeToProjects(e){return b.channel("projects_changes").on("postgres_changes",{event:"*",schema:"public",table:"projects"},e).subscribe()}subscribeToProjectStats(e){return b.channel("project_stats_changes").on("postgres_changes",{event:"*",schema:"public",table:"projects"},e).subscribe()}},X={all:["projects"],lists:()=>[...X.all,"list"],list:e=>[...X.lists(),{filters:e}],details:()=>[...X.all,"detail"],detail:e=>[...X.details(),e],stats:()=>[...X.all,"stats"],recent:e=>[...X.all,"recent",e],byStatus:e=>[...X.all,"byStatus",e],byClient:e=>[...X.all,"byClient",e],search:e=>[...X.all,"search",e]};const Z={planning:{label:"Planning",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300",icon:z},in_progress:{label:"In Progress",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",icon:K},on_hold:{label:"On Hold",color:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300",icon:Q},completed:{label:"Completed",color:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300",icon:T},cancelled:{label:"Cancelled",color:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300",icon:B}},ee={low:{label:"Low",color:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300"},medium:{label:"Medium",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300"},high:{label:"High",color:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300"},urgent:{label:"Urgent",color:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300"}};function te(){const{isAuthenticated:e}=f(),[t,d]=i.useState(""),[o,j]=i.useState("all"),[b,z]=i.useState("all"),[K,Q]=i.useState(!1),[T,B]=i.useState(null),[E,I]=i.useState(null),[O,$]=i.useState(!1),{data:H,isLoading:M,error:R}=a({queryKey:X.list(U),queryFn:()=>W.getProjects(U),select:e=>e.data||[],staleTime:3e5});var U;const V=function(){const e=r();return l({mutationFn:e=>W.createProject(e),onSuccess:t=>{t.data?(e.invalidateQueries({queryKey:X.lists()}),e.invalidateQueries({queryKey:X.stats()}),e.invalidateQueries({queryKey:X.recent(5)}),p.success("Project created successfully!")):p.error(t.error||"Failed to create project")},onError:e=>{p.error("Failed to create project")}})}(),J=function(){const e=r();return l({mutationFn:({id:e,...t})=>W.updateProject(e,t),onSuccess:(t,s)=>{t.data?(e.setQueryData(X.detail(s.id),t.data),e.invalidateQueries({queryKey:X.lists()}),e.invalidateQueries({queryKey:X.stats()}),e.invalidateQueries({queryKey:X.recent(5)}),p.success("Project updated successfully!")):p.error(t.error||"Failed to update project")},onError:e=>{p.error("Failed to update project")}})}(),te=function(){const e=r();return l({mutationFn:e=>W.deleteProject(e),onSuccess:(t,s)=>{t.data?(e.removeQueries({queryKey:X.detail(s)}),e.invalidateQueries({queryKey:X.lists()}),e.invalidateQueries({queryKey:X.stats()}),e.invalidateQueries({queryKey:X.recent(5)}),p.success("Project deleted successfully!")):p.error(t.error||"Failed to delete project")},onError:e=>{p.error("Failed to delete project")}})}(),se=i.useMemo(()=>H?H.filter(e=>{var s;const a=e.name.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())||(null==(s=e.client)?void 0:s.name.toLowerCase().includes(t.toLowerCase())),r="all"===o||e.status===o,l="all"===b||e.priority===b;return a&&r&&l}):[],[H,t,o,b]);return e?M?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx(u,{size:"lg",text:"Loading projects..."})}):R?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-2",children:"Error Loading Projects"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:R.message||"Failed to load projects. Please try again."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Projects"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Manage your projects and track their progress"})]}),s.jsxs(c,{onClick:()=>Q(!0),className:"mt-4 sm:mt-0 bg-gradient-to-r from-primary to-primary-600 hover:from-primary-600 hover:to-primary-700 button-glow hover-lift",children:[s.jsx(y,{className:"w-4 h-4 mr-2"}),"Add Project"]})]}),s.jsx(v,{children:s.jsx(N,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),s.jsx(m,{placeholder:"Search projects by name, description, or client...",value:t,onChange:e=>d(e.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:o,onChange:e=>j(e.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"on_hold",children:"On Hold"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]}),s.jsxs("select",{value:b,onChange:e=>z(e.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"all",children:"All Priority"}),s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]})]})})}),0===se.length?s.jsx(v,{children:s.jsxs(N,{className:"p-12 text-center",children:[s.jsx(x,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:t||"all"!==o||"all"!==b?"No projects found":"No projects yet"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:t||"all"!==o||"all"!==b?"Try adjusting your search or filter criteria.":"Get started by adding your first project."}),!t&&"all"===o&&"all"===b&&s.jsxs(c,{onClick:()=>Q(!0),className:"bg-gradient-to-r from-primary to-primary-600 hover:from-primary-600 hover:to-primary-700",children:[s.jsx(y,{className:"w-4 h-4 mr-2"}),"Add Your First Project"]})]})}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:se.map(e=>{var t;const a=Z[e.status],r=ee[e.priority],l=a.icon,i=!!(d=e.due_date)&&new Date(d)<new Date&&"completed"!==o;var d;return s.jsxs(v,{className:"card-hover group",children:[s.jsx(w,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(_,{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 group-hover:text-primary transition-colors",children:e.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsxs(P,{className:`${a.color} text-xs font-medium flex items-center gap-1`,children:[s.jsx(l,{className:"w-3 h-3"}),a.label]}),s.jsx(P,{className:`${r.color} text-xs font-medium`,children:r.label}),i&&s.jsx(P,{className:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300 text-xs font-medium",children:"Overdue"})]})]}),s.jsx("div",{className:"relative",children:s.jsx(c,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(C,{className:"w-4 h-4"})})})]})}),s.jsxs(N,{className:"space-y-3",children:[s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:s.jsx("p",{className:"line-clamp-2",children:e.description})}),s.jsxs("div",{className:"flex items-center text-sm text-slate-600 dark:text-slate-400",children:[s.jsx(S,{className:"w-4 h-4 mr-2 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:(null==(t=e.client)?void 0:t.name)||"No client assigned"})]}),e.budget&&s.jsxs("div",{className:"flex items-center text-sm text-slate-600 dark:text-slate-400",children:[s.jsx(h,{className:"w-4 h-4 mr-2 flex-shrink-0"}),s.jsx("span",{children:q(e.budget)})]}),s.jsx("div",{className:"space-y-1",children:e.due_date&&s.jsxs("div",{className:"flex items-center text-xs "+(i?"text-red-500 dark:text-red-400":"text-slate-500 dark:text-slate-400"),children:[s.jsx(g,{className:"w-3 h-3 mr-1"}),s.jsxs("span",{children:["Due: ",D(e.due_date)]})]})}),s.jsxs("div",{className:"flex items-center text-xs text-slate-500 dark:text-slate-400",children:[s.jsx(g,{className:"w-3 h-3 mr-1"}),s.jsxs("span",{children:["Created ",D(e.created_at)]})]}),s.jsxs("div",{className:"flex gap-2 pt-2 border-t border-slate-200 dark:border-slate-700",children:[s.jsxs(c,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>B(e),children:[s.jsx(F,{className:"w-3 h-3 mr-1"}),"Edit"]}),s.jsx(c,{variant:"outline",size:"sm",className:"flex-1",asChild:!0,children:s.jsxs(n,{to:`/projects/${e.id}`,children:[s.jsx(L,{className:"w-3 h-3 mr-1"}),"View"]})}),s.jsx(c,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/20",onClick:()=>(e=>{I(e),$(!0)})(e),children:s.jsx(A,{className:"w-3 h-3"})})]})]})]},e.id)})}),K&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:s.jsx(Y,{project:null,onSave:async e=>{try{await V.mutateAsync(e),Q(!1)}catch(t){}},onCancel:()=>Q(!1),isLoading:V.isPending})})}),T&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:s.jsx(Y,{project:T,onSave:async e=>{if(T)try{await J.mutateAsync({id:T.id,...e}),B(null)}catch(t){}},onCancel:()=>B(null),isLoading:J.isPending})})}),s.jsx(G,{isOpen:O,onClose:()=>$(!1),onConfirm:async()=>{if(E)try{await te.mutateAsync(E.id),I(null),$(!1)}catch(e){}},title:"Delete Project",message:`Are you sure you want to delete "${null==E?void 0:E.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"destructive"})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Authentication Required"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Please sign in to view projects."}),s.jsx(c,{asChild:!0,children:s.jsx(n,{to:"/auth/login",children:"Sign In"})})]})})}export{te as ProjectsPage};
