import{r as e}from"./vendor-5e66fe52.js";import{M as n}from"./index-654029b0.js";function t({table:t,event:r="*",onInsert:a,onUpdate:o,onDelete:c,onAnyChange:s,enabled:u=!0}){const l=e.useRef(null);return e.useEffect(()=>{if(!u)return;const e=n.channel(`${t}_changes`).on("postgres_changes",{event:r,schema:"public",table:t},e=>{"INSERT"===e.eventType&&a?a(e):"UPDATE"===e.eventType&&o?o(e):"DELETE"===e.eventType&&c&&c(e),s&&s(e)}).subscribe();return l.current=e,()=>{l.current&&(n.removeChannel(l.current),l.current=null)}},[t,r,a,o,c,s,u]),{channel:l.current}}function r(e,n=!0){return t({table:"clients",onAnyChange:e,enabled:n})}function a(e,n=!0){return t({table:"projects",onAnyChange:e,enabled:n})}function o(e,n=!0){return t({table:"appointments",onAnyChange:e,enabled:n})}function c(e,n=!0){return t({table:"financials",onAnyChange:e,enabled:n})}export{a,o as b,c,r as u};
